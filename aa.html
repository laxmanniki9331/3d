<!DOCTYPE html>
<html>

<head>
    <title>Test AR #1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.1.7/aframe/build/aframe-ar.js"></script>
    <script src="https://unpkg.com/aframe-gesture-detector-component@latest/dist/aframe-gesture-detector-component.min.js"></script>
    <script src="https://unpkg.com/aframe-super-hands-component@latest/dist/aframe-super-hands-component.min.js"></script>
</head>

<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <!-- Marker for tracking -->
        <a-marker type="pattern" url="pattern-marker.patt">
            <!-- Add 3D model with interaction capabilities -->
            <a-entity id="robot" gltf-model="url(RobotExpressive.glb)" scale="0.5 0.5 0.5" position="0 0.5 0" rotation="0 0 0" animation-mixer="clip: walk; loop: repeat;" gesture-detector super-hands draggable stretchable rotateable event-set__1="_event: pinchstarted; scale: 0.5 0.5 0.5"
                event-set__2="_event: pinchmoved; scale: *=2" event-set__3="_event: pinchended; scale: 1 1 1" event-set__4="_event: click; animation-mixer.clip: wave;" event-set__5="_event: dragend; animation-mixer.clip: walk; move: 1 0 0;">
            </a-entity>
            <!-- Text Entity to say "Hi" -->
            <a-text value="Hi!" position="0 1 0" scale="1 1 1" color="#FFFFFF">
            </a-text>
        </a-marker>
        <!-- Camera to view the scene -->
        <a-entity camera></a-entity>
    </a-scene>

    <script>
        // Script to move the model forward
        AFRAME.registerComponent('move', {
            schema: {
                type: 'vec3'
            },
            tick: function() {
                const data = this.data;
                const el = this.el;
                el.object3D.position.x += data.x * 0.01;
                el.object3D.position.y += data.y * 0.01;
                el.object3D.position.z += data.z * 0.01;
            }
        });

        // Add event listeners for touchpad controls
        document.addEventListener('touchstart', function(event) {
            var robot = document.querySelector('#robot');
            robot.emit('dragstart');
        });

        document.addEventListener('touchmove', function(event) {
            var robot = document.querySelector('#robot');
            robot.emit('dragmove');
        });

        document.addEventListener('touchend', function(event) {
            var robot = document.querySelector('#robot');
            robot.emit('dragend');
        });

        // Add event listeners for mouse controls
        document.addEventListener('mousedown', function(event) {
            var robot = document.querySelector('#robot');
            robot.emit('dragstart');
        });

        document.addEventListener('mousemove', function(event) {
            var robot = document.querySelector('#robot');
            robot.emit('dragmove');
        });

        document.addEventListener('mouseup', function(event) {
            var robot = document.querySelector('#robot');
            robot.emit('dragend');
        });
    </script>
</body>

</html>